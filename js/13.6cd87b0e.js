(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"0e6f":function(t,e,n){"use strict";var a,o,r={data:function(){return{}},methods:{successNotify:function(t){this.$q.notify({message:t,color:"positive",position:"top",timeout:1500,icon:"fas fa-check-square"})},warningNotify:function(t){this.$q.notify({message:t,color:"warning",position:"top",timeout:1500,icon:"fas fa-exclamation"})},errorNotify:function(t){this.$q.notify({message:t,color:"negative",position:"top",timeout:1500,icon:"fas fa-exclamation-triangle"})}}},i=r,s=n("a6c2"),c=Object(s["a"])(i,a,o,!1,null,null,null);e["a"]=c.exports},"207a":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-btn",{staticClass:"q-mr-md",attrs:{flat:"",ripple:"",label:t.$t("removeSelected"),size:"md",color:"red-7",icon:"delete","no-caps":""},on:{click:t.deleteAll}})},o=[],r={data:function(){return{}},methods:{deleteAll:function(){this.$emit("deleteAll")}}},i=r,s=n("a6c2"),c=Object(s["a"])(i,a,o,!1,null,null,null);e["a"]=c.exports},"5de2":function(t,e,n){},a720:function(t,e,n){"use strict";var a=n("5de2"),o=n.n(a);o.a},c54d:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"q-pa-md"},[n("div",{staticClass:"row justify-end"},[n("div",{staticClass:"col-12 text-right q-mb-md"},["RouteList"===t.component?n("q-btn",{attrs:{icon:"add",color:"green-6",label:t.$t("new")},on:{click:function(e){t.component="AddRoute"}}}):t._e(),"AddRoute"===t.component?n("q-btn",{attrs:{icon:"list",color:"purple-5",label:t.$t("list")},on:{click:function(e){t.component="RouteList"}}}):t._e()],1),n("div",{staticClass:"col-12"},[n(t.component,{tag:"component"})],1)])])},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-12"},[n("q-card",{staticClass:"shadow-1 col-12"},[n("q-tabs",{staticClass:"bg-grey-2 text-grey-7 shadow-1 full-width",attrs:{"inline-label":"","active-color":"primary","narrow-indicator":"",align:"left"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("q-tab",{attrs:{label:t.$t("general"),name:"general"}}),n("div",{staticClass:"text-right q-mr-sm col"},[n("q-btn",{attrs:{color:"primary",label:t.$t("save"),icon:"fas fa-save"},on:{click:t.saveRoute}})],1)],1),n("q-separator"),n("q-tab-panels",{attrs:{animated:"","transition-prev":"jump-up","transition-next":"jump-up"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("q-tab-panel",{attrs:{name:"general"}},[n("q-card-section",[n("div",{staticClass:"row justify-center"},[n("div",{staticClass:"q-pa-sm col-6"},[n("q-input",{attrs:{outlined:"",label:t.$t("source"),maxlength:"20",dense:"",rules:[function(e){return!!e||t.$t("required")}]},model:{value:t.route.source,callback:function(e){t.$set(t.route,"source",e)},expression:"route.source"}})],1),n("div",{staticClass:"q-pa-sm col-6"},[n("q-input",{attrs:{outlined:"",label:t.$t("destination"),maxlength:"20",dense:"",rules:[function(e){return!!e||t.$t("required")}]},model:{value:t.route.destination,callback:function(e){t.$set(t.route,"destination",e)},expression:"route.destination"}})],1)]),n("div",{staticClass:"row justify-center"},[n("div",{staticClass:"q-pa-sm col-6"},[n("q-input",{attrs:{outlined:"",label:t.$t("description"),maxlength:"20",dense:"",rules:[function(e){return!!e||t.$t("required")}]},model:{value:t.route.description,callback:function(e){t.$set(t.route,"description",e)},expression:"route.description"}})],1),n("div",{staticClass:"q-pa-sm col-6"},[n("q-input",{attrs:{outlined:"",label:t.$t("routeType"),maxlength:"20",dense:"",rules:[function(e){return!!e||t.$t("required")}]},model:{value:t.route.routeType,callback:function(e){t.$set(t.route,"routeType",e)},expression:"route.routeType"}})],1)]),n("div",{staticClass:"row justify-center"},[n("div",{staticClass:"q-pa-sm col-6 text-center"},[n("q-checkbox",{attrs:{label:t.$t("routeStatus")},model:{value:t.route.routeStatus,callback:function(e){t.$set(t.route,"routeStatus",e)},expression:"route.routeStatus"}})],1),n("div",{staticClass:"q-pa-sm col-6"},[n("q-input",{attrs:{outlined:"",label:t.$t("routePriority"),placeholder:t.$t("onlyNumber"),maxlength:"20",dense:"",type:"number"},model:{value:t.route.routePriority,callback:function(e){t.$set(t.route,"routePriority",e)},expression:"route.routePriority"}})],1)]),n("q-separator",{staticClass:"q-mt-md q-mb-md"}),n("div",{staticClass:"row q-mt-lg q-ml-sm justify-center"},[n("div",{staticClass:"col-xl-9 col-lg-6 col-md-10 col-sm-10 col-xs-12 flex items-center"},[n("q-select",{staticClass:"full-width",attrs:{dense:"",outlined:"",options:t.allActions,"option-value":"value","option-label":"label","map-options":"",label:t.$t("routeActions")},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{staticClass:"q-ml-md",attrs:{color:"primary","no-caps":"",label:t.$t("addAction")},on:{click:function(e){return t.getParams(t.routeSelected)}}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{color:"grey-7",outline:"",unelevated:"","no-caps":"",label:t.$t("removeAll")},on:{click:t.removeAllActions}})]},proxy:!0}]),model:{value:t.routeSelected,callback:function(e){t.routeSelected=e},expression:"routeSelected"}})],1)]),n("div",{staticClass:"row q-mt-lg q-ml-sm justify-center"},[n("div",{staticClass:"col-xl-9 row"},[n("div",{staticClass:"col-xl-4 col-lg-6 col-md-6 col-sm-8 col-xs-12"},[n("q-tabs",{staticClass:"text-primary bg-grey-3 full-width",attrs:{vertical:""},model:{value:t.actionsTab,callback:function(e){t.actionsTab=e},expression:"actionsTab"}},t._l(t.route.routeActions,(function(e,a){return n("q-tab",{key:a,attrs:{name:a,label:e.label}},[n("q-badge",{attrs:{floating:""}},[t._v(t._s(t.parametersByRouteActionsSelected[a].priority))])],1)})),1)],1),n("div",{staticClass:"col-xl-8 col-lg-12 col-md-8 col-sm-6 col-xs-6"},[n("q-tab-panels",{attrs:{animated:"","transition-prev":"jump-up","transition-next":"jump-up"},model:{value:t.actionsTab,callback:function(e){t.actionsTab=e},expression:"actionsTab"}},t._l(t.parametersByRouteActionsSelected,(function(e,a){return n("q-tab-panel",{key:a,staticClass:"bg-grey-1 q-pa-none",staticStyle:{"min-height":"400px"},attrs:{name:a}},[n("div",{staticClass:"q-pt-none q-pl-md q-pr-md"},[n("q-list",{attrs:{separator:""}},[n("q-item",[n("q-item-section",{attrs:{avatar:""}},[n("q-input",{attrs:{outlined:"",label:"Prioridade da ação",type:"number"},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"low_priority"}})]},proxy:!0}],null,!0),model:{value:e.priority,callback:function(n){t.$set(e,"priority",n)},expression:"item.priority"}})],1),n("q-item-section"),n("q-item-section",{attrs:{side:""}},[n("q-btn",{attrs:{"no-caps":"",unelevated:"",color:"red-5",label:"Excluir ação",icon:"remove_circle_outline"},nativeOn:{click:function(e){return t.removeAction(a)}}})],1)],1),t._l(e.parameters,(function(e,a){return n("q-item",{key:a},[n("q-item-section",[t._v(t._s(e.name))]),n("q-item-section",["string"===e.typeInput?n("q-input",{staticClass:"full-width",attrs:{dense:"",outlined:""},model:{value:e.vchValue,callback:function(n){t.$set(e,"vchValue",n)},expression:"input.vchValue"}}):n("q-checkbox",{staticClass:"full-width",model:{value:e.vchValue,callback:function(n){t.$set(e,"vchValue",n)},expression:"input.vchValue"}})],1)],1)}))],2)],1)])})),1)],1)])])],1)],1)],1)],1)],1)},i=[],s=(n("1a43"),n("2811")),c=n.n(s),l=n("ddeb"),u=n.n(l),d=n("f26e"),p=n.n(d),f=n("39df1"),m=n.n(f),h=n("d997"),v=function(t){function e(){return c()(this,e),u()(this,p()(e).call(this,"/route"))}return m()(e,t),e}(h["a"]),b=n("0e6f"),y={name:"AddRouteComponent",mixins:[b["a"]],data:function(){return{RoutesService:new v,dragging:!1,priorityOptions:[],counter:0,idx:0,splitterModel:"100%",routeSelected:"",actionsTab:"",actionsTabName:"",route:{source:"",destination:"",description:"",routeType:"",routeStatus:!1,routePriority:"",routeActions:[]},allActions:[],tab:"general",parametersByRouteActionsSelected:[]}},mounted:function(){this.getActions()},computed:{routeModel:function(){return{source:this.route.source,destination:this.route.destination,description:this.route.description,routeType:this.route.routeType,routeStatus:this.route.routeStatus,routePriority:parseInt(this.route.routePriority),routeActions:this.filterActionsParams()}}},methods:{filterActionsParams:function(){var t=this,e=this.route.routeActions.map((function(e,n){var a=t.parametersByRouteActionsSelected.map((function(t,a){if(n===a)return t.parameters.map((function(n){return e.priority=t.priority,{IDActionParameter:n.parameter,vchValue:!0===n.vchValue||!1===n.vchValue?JSON.stringify(n.vchValue):n.vchValue}}))}));return{idAction:e.value,priority:e.priority,parameterValues:a}}));return e.map((function(t){return{idAction:t.idAction,priority:t.priority,parameterValues:t.parameterValues.filter((function(t){return t})).flat()}}))},saveRoute:function(){var t=this;this.RoutesService.create(this.routeModel).then((function(e){t.successNotify("Rota adicionada com sucesso")})).catch((function(e){t.errorNotify(e)}))},getActions:function(){var t=this;this.$axios.get("route/actions/").then((function(e){t.allActions=e.data.map((function(t){return{label:t.name,value:t.idAction}}))})).catch((function(e){t.errorNotify(e)}))},getParams:function(t){var e=this;t&&(this.route.routeActions.push(t),this.$axios.get("route/actionParameter/".concat(t.value)).then((function(n){var a={idAction:t.value,actionName:t.label,parameters:n.data};e.parametersByRouteActionsSelected.push(a)})).catch((function(t){e.errorNotify(t)})))},removeAllActions:function(){var t=this;this.$q.dialog({title:"Confirm",message:"Tem certeza que deseja deletar todas as ações?",cancel:!0,persistent:!0}).onOk((function(){t.route.routeActions=[],t.parametersByRouteActionsSelected=[]}))},removeAction:function(t){this.route.routeActions.splice(t,1),this.parametersByRouteActionsSelected.splice(t,1)}}},g=y,q=(n("a720"),n("a6c2")),x=Object(q["a"])(g,r,i,!1,null,"78c06100",null),w=x.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"shadow-1 col-12"},[n("q-table",{staticClass:"shadow-1 full-width my-sticky-header-table",attrs:{title:t.$t("routeList"),data:t.routeList,columns:t.columns,separator:"cell",filter:t.filter,"no-data-label":t.$t("noData"),"no-results-label":t.$t("noResultsForSearch"),pagination:t.pagination,loading:t.loading,"row-key":"idRoute",selection:"multiple",selected:t.routeSelected,flat:""},on:{"update:pagination":function(e){t.pagination=e},"update:selected":function(e){t.routeSelected=e}},scopedSlots:t._u([{key:"top-right",fn:function(){return[t.routeSelected.length>0?n("button-delete-all",{on:{deleteAll:function(e){return t.deleteRoute()}}}):t._e(),n("q-input",{attrs:{outlined:"",dense:"",borderless:"",debounce:"300",placeholder:t.$t("search")},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-actions",fn:function(e){return n("q-td",{staticStyle:{width:"100px"},attrs:{props:e}},[n("div",{staticClass:"row items-center justify-center no-wrap"},[n("q-btn",{attrs:{flat:"",round:"",size:"sm",color:"blue-8",icon:"fas fa-pen"},on:{click:function(n){return t.editRoute(e.row)}}})],1)])}}])})],1)},k=[],A=n("52b5"),S=n.n(A),C=(n("c1c3"),n("549c")),R=n.n(C),_=(n("0dbc"),n("b7dd"),n("8cf6"),n("207a")),N={name:"ListRouteComponent",mixins:[b["a"]],components:{ButtonDeleteAll:_["a"]},data:function(){return{RoutesService:new v,routeSelected:[],routeList:[],pagination:{sortBy:"idRoute",descending:!1,page:1,rowsPerPage:20},loading:!1,filter:"",columns:[{name:"source",label:this.$t("source"),field:"source",sortable:!0,align:"center"},{name:"destination",label:this.$t("destination"),field:"destination",sortable:!0,align:"center"},{name:"description",label:this.$t("description"),field:"description",sortable:!0,align:"center"},{name:"actions",label:this.$t("actions"),field:"actions",sortable:!1,align:"center"}]}},mounted:function(){this.listRoute()},methods:{deleteRoute:function(){var t=this;this.$q.dialog({title:this.$t("confirm"),noEscDimiss:!0,transitionShow:"fade",transitionHide:"fade",message:this.$t("areYouSureYouWantToDelete")+"?",cancel:{color:"grey-5",push:!1},ok:{color:"primary",push:!1},persistent:!0}).onOk((function(){t.routeSelected.forEach((function(e){t.$q.loading.show({delay:100}),t.RoutesService.remove(e.idRoute).then((function(e){t.listRoute(),t.successNotify("User deleted")})).catch((function(e){t.errorNotify(e.message)})).finally((function(){return t.$q.loading.hide()}))}))}))},listRoute:function(){var t=R()(S.a.mark((function t(){var e=this;return S.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.RoutesService.list().then((function(t){e.routeList=t})).catch((function(t){return e.errorNotify(t.message)})).finally((function(){e.loading=!1}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},T=N,j=Object(q["a"])(T,$,k,!1,null,null,null),P=j.exports,E={name:"RoutePages",id:null,components:{AddRoute:w,RouteList:P},mounted:function(){this.setId()},data:function(){return{component:"RouteList",showAddForm:!1,pageSelected:""}},methods:{backToList:function(){this.showAddForm=!1,this.$route.params.id&&this.$router.push("/routes")},setId:function(){this.id=this.$route.params.id,this.id&&(this.components="AddRoute")}},watch:{$route:function(t,e){this.setId()}}},V=E,L=Object(q["a"])(V,a,o,!1,null,null,null);e["default"]=L.exports},d997:function(t,e,n){"use strict";var a=n("52b5"),o=n.n(a),r=(n("c1c3"),n("549c")),i=n.n(r),s=n("2811"),c=n.n(s),l=n("9289"),u=n.n(l),d=n("7338"),p=n.n(d),f=function(t,e,n){var a=JSON.parse(JSON.stringify(t)).response;return navigator.onLine?a?new Error(m(a,e,n)):new Error("Servidor indisponivel, tente mais tarde"):new Error("Sem acesso à internet, por favor, tente mais tarde")},m=function(t,e,n){var a=t.data,o={400:function(){return h(a)},401:function(){return"Sessão expirada. Logue-se novamente"},404:function(){return"Endereço de acesso não encontrado"},500:function(){return v(e,n)},503:function(){return"Servidor indisponível. Tente novamente mais tardeftfr"},default:function(){return"Erro de verificação do status da requisição"}};return(o[t.status]||o["default"])()},h=function(t){return t&&t!=={}?t.length>1?t:t.error:"Existem erros a serem processados"},v=function(t,e){var n={list:"Não foi possível realizar a listagem, tente mais tarde.",get:"Não foi possível realizar a consulta de ".concat(e,", tente mais tarde."),create:"Não foi possível realizar o cadastro, tente mais tarde.",update:"Não foi possível realizar a edição, tente mais tarde.",remove:"Não foi possível realizar a exclusão, tente mais tarde.",login:"Não foi possível realizar o login, tente mais tarde.",default:"Erro de verificação"};return n[t]||n["default"]};n.d(e,"a",(function(){return b}));var b=function t(e){var n=this;c()(this,t),u()(this,"list",i()(o.a.mark((function t(){var e;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.get(n.api);case 3:return e=t.sent,t.abrupt("return",e.data);case 7:throw t.prev=7,t.t0=t["catch"](0),f(t.t0,"list");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))),u()(this,"show",function(){var t=i()(o.a.mark((function t(e){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.http.get("".concat(n.api,"/").concat(e));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t["catch"](0),f(t.t0,"get","item");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),u()(this,"create",function(){var t=i()(o.a.mark((function t(e){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.http.post(n.api,e);case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t["catch"](0),f(t.t0,"create");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),u()(this,"update",function(){var t=i()(o.a.mark((function t(e){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.http.put("".concat(n.api),e);case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t["catch"](0),f(t.t0,"update");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),u()(this,"remove",function(){var t=i()(o.a.mark((function t(e){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.http.delete("".concat(n.api,"/").concat(e));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t["catch"](0),f(t.t0,"remove");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),this.api=e,this.http=p.a}}}]);